# 环境切换说明

## 配置文件说明

| 配置文件 | 环境名 | 数据库 | 用途 |
|----------|--------|--------|------|
| `.env` | dev | qinqiang02@localhost | **默认环境**，开发测试 |
| `.env.dev` | dev | qinqiang02@localhost | 开发测试库（备份） |
| `.env.local` | local | gaoji@localhost | 本地完整库（从生产导入） |
| `.env.prod` | prod | prod_datacenter_cal@远程 | 生产环境（需VPN） |

---

## 使用方法

### 方式1：通过环境变量切换（推荐）

```bash
# 使用开发库（默认）
python red_blue_matcher.py --test-limit 100

# 使用本地完整库
ENV=local python red_blue_matcher.py --test-limit 100

# 使用生产库
ENV=prod python red_blue_matcher.py --test-limit 100
```

### 方式2：修改 .env 文件

编辑 `.env` 文件，修改 `ENV=` 的值：
- `ENV=dev` → 使用开发库
- `ENV=local` → 使用本地完整库
- `ENV=prod` → 使用生产库

---

## 数据库对比

| 特性 | dev (qinqiang02) | local (gaoji) | prod (远程) |
|------|------------------|---------------|-------------|
| 数据量 | 小样本 | 完整（1800万+） | 完整（实时） |
| 速度 | 很快 | 快 | 慢（需VPN） |
| 网络 | 本地 | 本地 | 远程（需VPN） |
| 适用场景 | 快速测试、调试 | 完整功能验证 | 生产环境验证 |

---

## 测试配置

验证当前环境配置：

```bash
python config.py
```

查看所有环境配置：

```bash
ENV=dev python config.py
ENV=local python config.py
ENV=prod python config.py
```

---

## 常见使用场景

### 开发新功能
```bash
# 使用小数据库快速迭代
python red_blue_matcher.py --test-limit 10
```

### 性能测试
```bash
# 使用本地完整库测试性能
ENV=local python red_blue_matcher.py --test-limit 10000
```

### 生产验证
```bash
# 连接生产库（需VPN）
ENV=prod python red_blue_matcher.py --test-limit 100
```

---

## 注意事项

1. **默认环境是 dev**，无需额外配置
2. **生产环境需要 VPN** 连接
3. **local 环境数据**是从生产库导出的快照，可能与当前生产数据有差异
4. 建议日常开发使用 `dev`，完整测试使用 `local`，验证使用 `prod`
